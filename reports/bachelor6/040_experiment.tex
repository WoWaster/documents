% !TeX spellcheck = ru_RU
% !TEX root = vkr.tex

\section{Апробация}

\epigraph{Случайные тесты как коробка шоколадных конфет~--- никогда не знаешь, какой упадёт.}{Барсуков Илья, магистр ИТМО}

В весеннем семестре 2024 года данный курс читался первокурсникам магистратуры ИТМО.
В течение семестра были выявлены следующие проблемы:
\begin{itemize}
    \item Отсутствие ручных тестов.
    \item Необходимость тестирования всех требуемых функций.
    \item Необходимость предупреждать студентов о том, что решения нужно оптимизировать.
\end{itemize}

\subsection{Отсутствие ручных тестов}

\begin{figure}[b]
    \caption{Зависимость задач друг от друга}
    \label{fig:dependencies}
    \centering
    \begin{tikzpicture}[shorten >=1pt, node distance=2cm, on grid]
        \node [circle, draw] (3) {3};
        \node [circle, draw, right = of 3] (4) {4};
        \node [circle, draw, right = of 4] (6) {6};
        \node [circle, draw, right = of 6] (7) {7};
        \node [circle, draw, right = of 7] (8) {8};
        \node [circle, draw, right = of 8] (9) {9};

        \path[->] (9) edge (8);
        \path[->] (8) edge (7);
        \path[->] (7) edge (6);
        \path[->] (6) edge (4);
        \path[->] (4) edge (3);

        \path[->] (7) edge [bend right] (4);
        \path[->] (8) edge [bend right] (4);
        \path[->] (9) edge [bend right] (4);

        \path[->] (8) edge [bend left] (6);
        \path[->] (9) edge [bend left] (6);

        \path[->] (9) edge [bend right] (7);
    \end{tikzpicture}
\end{figure}

При постановке задачи планировалось использовать property-based тесты.
Тем не менее данный подход в одиночку оказался недостаточен.

В большинстве задач тесты основываются на сравнении ответов различных алгоритмов (см. рисунок \ref{fig:dependencies}).
Так алгоритм из задачи №3 тестируется только в тестах задачи №4, когда появляется возможность сравнить результаты.
А затем алгоритмом из задачи №4 тестируются задачи №№6--9.

К сожалению, в таком случае есть вероятность, что задачи №№3 и 4 решены одинаково неправильно, из-за чего тесты проходят, и проверяющий засчитывает некорректное решение.
А при выполнении задания №6 не проходят тесты по непонятной причине.

В такую ловушку попало как минимум два студента: их решения не обрабатывали граничный случай~--- пустую строку.
Из этого был сделан вывод о том, что для каждой задачи стоит иметь небольшой набор ручных тестов, проверяющих в том числе крайние случаи.

\subsection{Тестирование всех функций}

Для некоторых заданий требуются вспомогательные функции, которые затем могут использоваться в тестах.
Тем не менее так получается не всегда, и в таком случае стоит иметь хотя бы тесты проверяющие самое наличие функции, иначе про необходимость реализации забывают как студенты, так и проверяющие.

Основная алгоритмическая функция из задания №3 тестировалась только в задаче №4 и многие студенты забыли её реализовать, и нескольким студентам задача была зачтена без неё.
Эти студенты реализовали её при выполнении задачи №4.

\subsection{Оптимизация решений}

При реализации эталонных решений применялись различные способы оптимизации: ранний выход из цикла, использование оптимальных форматов разреженных матриц.
Студенты же выполняли задания \enquote{в лоб}, что привело к интересным последствиям.

В мае был выполнен рефакторинг кода автоматических тестов, в следствие чего количество тестов резко увеличилось.
Время исполнения тестов наших решений увеличилось немного, а вот тесты у некоторых студентов стали проходить за 4 часа.

В результате, был сделан вывод о том, что необходимо каким-либо образом мотивировать студентов на оптимизацию собственных решений.
